{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Parameters" : {
     "SSHLocation": {
            "Description": " The IP address range that can be used to SSH to the EC2 instances",
            "Type": "String",
            "MinLength": "9",
            "MaxLength": "18",
            "Default": "0.0.0.0/0",
            "AllowedPattern": "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
            "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
     }
  },
  "Resources" : {
      "EC2Instance" : {
           "Type" : "AWS::EC2::Instance",
           "Properties" : {
              "KeyName":  "101016" ,
              "AvailabilityZone" : "us-west-2a" , 
              "ImageId" :  "ami-5ec1673e" ,
              "InstanceType" :  "t2.micro", 
              "SecurityGroupIngress" : [
                 {"IpProtocol" : "tcp", "FromPort" : "80", "ToPort" : "80", "CidrIp" : "0.0.0.0/0"},
                 {"IpProtocol" : "tcp", "FromPort" : "22", "ToPort" : "22", "CidrIp" : { "Ref" : "SSHLocation"}}
              ],
              "install" : {
                 "packages" : {
              	    "yum" : {
                       "httpd"        : []
              	    }
                 }
              },
              "UserData" : {
                " #!/bin/bash ",
                " yum update  ",
                " service httpd restart" 
              }
           }
      }
  }
}